<html>
<head>

<title>Merry Christmas Kels!</title>
<script type="text/javascript">

var AG_SPRITE_INST;
var AG_HOME = [-0.2, 0.1, 0];
var AG_POS = AG_HOME.slice();
var AG_VEL = [0, 0, 0];
var AG_JUMP_TIMER = 0;

var CAM;


function draw_sprite(model, sprite, tex)
{
    g.web.assets['mesh/plane'].using_shader('sprite')
                         .with_attribute({name:'a_position', buffer: 'positions', components: 3})
                         .with_attribute({name:'a_tex_coord', buffer: 'texture_coords', components: 2})
                         .set_uniform('u_sprite_sheet').texture(tex)
                         .with_camera(CAM)
                         .set_uniform('u_model').mat4(model)
                         .set_uniform('u_origin_size').vec4(sprite.origin().concat(sprite.size()))
                         .draw_tri_strip();
}

function on_load()
{

g.web.canvas(document.getElementsByTagName('canvas')[0], {fixed_size: false});

g.initialize(function ()
{
    g.is_running = true;

    g.web.gfx.shader.create('sprite', SRC_SPRITE_VS, SRC_SPRITE_FS);
    g.web.assets['tex/ag'] = g.web.gfx.texture.clamped().pixelated().create(document.getElementById('ag'));
    g.web.assets['tex/beddy'] = g.web.gfx.texture.clamped().pixelated().create(document.getElementById('beddy'));
    g.web.assets['sprite/ag'] = g.web.gfx.sprite.create(AG_SPRITE);
    g.web.assets['sprite/beddy'] = g.web.gfx.sprite.create(BEDDY_SPRITE);

    AG_SPRITE_INST = new g.web.assets['sprite/ag']();
    BEDDY_SPRITE_INST = new g.web.assets['sprite/beddy']();

    AG_SPRITE_INST.tag = AG_SPRITE_INST.tags['snooze'];
    BEDDY_SPRITE_INST.tag = BEDDY_SPRITE_INST.tags['snooze'];

    g.web.assets['mesh/plane'] = g.web.gfx.mesh.create({
        positions: [
            -1,-1, 0,
            -1, 1, 0,
             1,-1, 0,
             1, 1, 0,
        ],
        texture_coords: [
            1, 0,
            1, 1,
            0, 0,
            0, 1,
        ]
    });

    CAM = new g.web.gfx.camera();

    gl.enable(gl.BLEND);
    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

    return true;
});

g.web.pointer.on_press(function (e) {
  BEDDY_SPRITE_INST.queue = [BEDDY_SPRITE_INST.tags['snooze'], BEDDY_SPRITE_INST.tags['kick']];
  AG_VEL = [0.7, 4, 0];
  AG_SPRITE_INST.set('Soar');
});

g.web.draw(function (dt)
{
    if (g.is_running == false) { return; }


    // Update
    AG_SPRITE_INST.tick(dt);
    BEDDY_SPRITE_INST.tick(dt);

    AG_VEL = AG_VEL.add([0, -9.8 * dt, 0]);

    if (AG_POS[0] <= AG_HOME[0])
    {
      if (AG_POS[1] <= AG_HOME[1] && AG_VEL[1] < 0)
      {
        AG_VEL[1] = 0;
        AG_POS[1] = AG_HOME[1];
        AG_VEL = AG_VEL.mul(0.5);
        AG_SPRITE_INST.queue = [AG_SPRITE_INST.tags['snooze']];
      }
    }
    else
    {
      if (AG_POS[1] < -0.4 && AG_VEL[1] < 0)
      {
        AG_VEL[1] = 0;
        AG_VEL = AG_VEL.mul(0.25);
        AG_JUMP_TIMER += dt;
        AG_SPRITE_INST.set('sit');
      }
    }

    if (AG_JUMP_TIMER > 1)
    {
      AG_JUMP_TIMER = 0;
      AG_SPRITE_INST.set('Jump');
      AG_VEL = [-(AG_POS[0] - AG_HOME[0]), 5.5, 0];
    }

    AG_POS = AG_POS.add(AG_VEL.mul(dt));

    // Draw
    function scl(x, y, z)
    {
        return [
            [ x, 0, 0, 0 ],
            [ 0, y, 0, 0 ],
            [ 0, 0, z, 0 ],
            [ 0, 0, 0, 1 ]
        ];
    }

    CAM.orthographic();
    gl.clearColor(1, 1, 1, 1);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    draw_sprite(
      scl(1, 0.5, 0.5).mat_mul([].translate([-0.6, 0, 0])),
      BEDDY_SPRITE_INST,
      g.web.assets['tex/beddy']
    );
    draw_sprite(
      scl(0.25, 0.25, 0.25).mat_mul([].translate(AG_POS)),
      AG_SPRITE_INST,
      g.web.assets['tex/ag']
    );
});

g.start();
}

</script>
</head>

<body class="container-fluid bg-dark" onload="on_load()">

<canvas class="col" style="width: 100%; height: 100%"></canvas>

<script type="text/javascript">
  const g={_initalize:function(){},_update:function(){},is_running:!0,timer:function(){this._last=(new Date).getTime(),this._start=(new Date).getTime(),this.tick=function(){var t=(new Date).getTime(),r=t-this._last;return this._last=t,r/1e3},this.total=function(){return(new Date).getTime()-this._start}},initialize:function(t){return g._initialize=t,this},update:function(t){return g._update=t,this},canvas:function(t){return g._canvas=t,this},start:function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,r=new g.timer;if(g.web){try{g.web._socket=io(),g.web._socket.on("message",g.web._on_message),g.web.socket=function(){return g.web._socket}}catch(t){}if(!g.web.gfx._initalize())return}if(g._initialize()){var n=function(){var i=r.tick();g.is_running&&(g._update(i),g.web&&g.web._draw(i)),g.web&&t(n)};g.web&&t(n)}else console.error("initialize_func(): returned false.")}};function for_each(t,r){if(!t)return t;if(t.constructor===Array)return t.for_each(r);for(var n in t)t.hasOwnProperty(n)&&r(t[n],n,this);return t}Array.prototype.is_matrix=function(){return this[0].constructor===Array},Array.prototype.new_matrix=function(t,r){for(var n=new Array(t),i=t;i--;){n[i]=new Array(r);for(var e=r;e--;)n[i][e]=0}return n},Array.prototype.add=function(t){var r=new Array(this.length);if("number"==typeof t)for(var n=this.length;n--;)r[n]=this[n]+t;else if(t.constructor===Array)for(n=this.length;n--;)r[n]=this[n]+t[n];return r},Array.prototype.sub=function(t){var r=new Array(this.length);if("number"==typeof t)for(var n=this.length;n--;)r[n]=this[n]-t;else if(t.constructor===Array)for(n=this.length;n--;)r[n]=this[n]-t[n];return r},Array.prototype.mul=function(t){var r=new Array(this.length);if("number"==typeof t)if(this.is_matrix()){const e=this.mat_dims();for(var n=e[0];n--;){r[n]=new Array(e[1]);for(var i=e[1];i--;)r[n][i]=this[n][i]*t}}else for(var e=this.length;e--;)r[e]=this[e]*t;else if(t.constructor===Array&&"number"==typeof t[0])return this.mat_mul(t);return r},Array.prototype.pow=function(t){var r=new Array(this.length);if("number"==typeof t)if(this.is_matrix()){const e=this.mat_dims();for(var n=e[0];n--;){r[n]=new Array(e[1]);for(var i=e[1];i--;)r[n][i]=Math.pow(this[n][i],t)}}else for(var e=this.length;e--;)r[e]=Math.pow(this[e],t);else if(v.constructor===Array&&"number"==typeof t[0])for(e=this.length;e--;)r[e]=Math.pow(this[e],t[e]);return r},Array.prototype.div=function(t){var r=new Array(this.length);if("number"==typeof t)for(var n=this.length;n--;)r[n]=this[n]/t;else if(t.constructor===Array)for(n=this.length;n--;)r[n]=this[n]/t[n];return r},Array.prototype.lerp=function(t,r){for(var n=new Array(this.length),i=0;i<n.length;i++)n[i]=this[i]*(1-r)+t[i]*r;return n},Array.prototype.len=function(){return"number"!=typeof this[0]?NaN:Math.sqrt(this.dot(this))},Array.prototype.norm=function(){return"number"!=typeof this[0]?null:this.div(this.len())},Array.prototype.mat_dims=function(){return[this.length,this[0].length]},Array.prototype.mat_mul=function(t){var r=this.matrix(),n=t.matrix();const i=r.mat_dims(),e=n.mat_dims();for(var o=this.new_matrix(i[0],e[1]),a=i[1],s=i[0];s--;)for(var u=e[1];u--;){o[s][u]=0;for(var h=a;h--;)o[s][u]+=r[s][h]*n[h][u]}return o},Array.prototype.swap_rows=function(t,r){const n=this[i];return this[i]=this[j],this[j]=n,this},Array.prototype.augment=function(){const t=this.mat_dims(),r=t[0],n=t[1],i=2*n;for(var e=this.new_matrix(r,i),o=r;o--;){e[o][o+n]=1;for(var a=n;a--;)e[o][a]=this[o][a]}return e},Array.prototype.rref=function(){var t=this.matrix();const r=t.mat_dims(),n=r[0],i=r[1];for(var e=0,o=0;o<n;o++){if(0==t[o][e]){for(var a=-1,s=o+1;s<n;s++)if(0!=t[s][e]){a=s;break}a>-1&&t.swap_rows(a,o)}{const r=1/t[o][e];for(var u=e;u<i;u++)t[o][u]*=r}for(s=0;s<n;s++){if(0==t[s][e]||s==o)continue;const r=t[s][e];for(u=e;u<i;u++)t[s][u]-=r*t[o][u]}++e}return t},Array.prototype.inverse=function(){const t=this.mat_dims(),r=t[0],n=t[1],i=this.augment().rref();for(var e=new Array(r),o=r;o--;){var a=i[o].slice(n,2*n);e[o]=a}return e},Array.prototype.flatten=function(){var t=[];if("number"==typeof this[0])t=this;else for(var r=0;r<this.length;++r)t=t.concat(this[r]);return t},Array.prototype.as_Float32Array=function(t){return new Float32Array(this.flatten())},Array.prototype.as_Int16Array=function(t){return new Int16Array(this.flatten())},Array.prototype.transpose=function(){const t=this.mat_dims();for(var r=this.new_matrix(t[1],t[0]),n=t[0];n--;)for(var i=t[1];i--;)r[i][n]=this[n][i];return r},Array.prototype.matrix=function(){return this[0].constructor===Array?this:[this].transpose()},Array.prototype.random_unit=function(){return[Math.random(),Math.random(),Math.random()].sub([.5,.5,.5]).norm()},Array.prototype.I=function(t){for(var r=this.new_matrix(t,t),n=t;n--;)for(var i=t;i--;)r[i][n]=n==i?1:0;return r},Array.prototype.dot=function(t){for(var r=0,n=this.length;n--;)r+=this[n]*t[n];return r},Array.prototype.cross=function(t){return[this[1]*t[2]-this[2]*t[1],this[2]*t[0]-this[0]*t[2],this[0]*t[1]-this[1]*t[0]]},Array.prototype.translate=function(t){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-t[0],-t[1],-t[2],1]]},Array.prototype.perspective=function(t,r,n,i){const e=Math.tan(.5*Math.PI-.5*t),o=i-n;return[[e/r,0,0,0],[0,e,0,0],[0,0,-(i+n)/o,-1],[0,0,-2*(i*n)/o,1]]},Array.prototype.orthographic=function(t,r,n,i,e,o){const a=t-r,s=n-i,u=o-e;return[[2/a,0,0,-(t+r)/a],[0,2/s,0,-(n+i)/s],[0,0,-2/u,-(o+e)/u],[0,0,0,1]]},Array.prototype.view=function(t,r,n){const i=r.cross(n).mul(1),e=i.cross(r),o=r,a=t;var s=[[i[0],i[1],i[2],0],[e[0],e[1],e[2],0],[o[0],o[1],o[2],0],[0,0,0,1]].transpose();return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[a[0],a[1],a[2],1]].mat_mul(s)},Array.prototype.rotation=function(t,r){const n=t,i=Math.cos(r),e=Math.sin(r),o=1-i;return[[i+n[0]*n[0]*o,n[1]*n[0]*o+n[2]*e,n[2]*n[0]*o-n[1]*e,0],[n[0]*n[1]*o-n[2]*e,i+n[1]*n[1]*o,n[2]*n[1]*o+n[0]*e,0],[n[0]*n[2]*o+n[1]*e,n[1]*n[2]*o-n[0]*e,i+n[2]*n[2]*o,0],[0,0,0,1]]},Array.prototype.scale=function(t){var r=[].I(4).mul(t);return r[3][3]=1,r},Array.prototype.quat_rotation=function(t,r){var n=r/2,i=Math.sin(n);return t.mul(i).concat(Math.cos(n))},Array.prototype.quat_rotate_vector=function(t){var r=this.slice(0,3),n=r.cross(t);n=n.mul(2);var i=r.cross(n);return n=n.mul(this[3]),t.add(n).add(i)},Array.prototype.quat_to_matrix=function(){var t=this,r=t[3],n=t[0],i=t[1],e=t[2],o=r*r,a=n*n,s=i*i,u=e*e;return[[o+a-s-u,2*n*i-2*r*e,2*n*e+2*r*i,0],[2*n*i+2*r*e,o-a+s-u,2*i*e-2*r*n,0],[2*n*e-2*r*i,2*i*e+2*r*n,o-a-s+u,0],[0,0,0,1]]},Array.prototype.quat_conjugate=function(){return this.mul([-1,-1,-1,1])},Array.prototype.quat_inverse=function(){const t=this.dot(this);return this.quat_conjugate().mul(1/t)},Array.prototype.quat_mul=function(t){return[this[3]*t[0]+this[0]*t[3]+this[1]*t[2]-this[2]*t[1],this[3]*t[1]-this[0]*t[2]+this[1]*t[3]+this[2]*t[0],this[3]*t[2]+this[0]*t[1]-this[1]*t[0]+this[2]*t[3],this[3]*t[3]-this[0]*t[0]-this[1]*t[1]-this[2]*t[2]]},Array.prototype.for_each=function(t){for(var r=0;r<this.length;++r)t(this[r],r,this);return this},Array.prototype.accumulate=function(t,r,n){n=n||1;for(var i=this.length;i--;)this[i][t]=this[i][t].add(this[i][r].mul(n))},Array.prototype.timed_queue=function(){return this.last_idx=function(){return this.length-1<0?0:this.length-1},this.peek=function(){return this.empty()?null:this[this.last_idx()].value},this.empty=function(){return 0==this.length},this.push=function(t,r){const n=t.value||t,i=t.time||r;this.unshift({value:n,time:i})},this.update=function(t){if(this.empty())return this;this[this.last_idx()].time-=t,this[this.last_idx()].time<=0&&this.pop()},this},Math.ray=function(t){return{intersects:{sphere:function(r,n){const i=r.sub(t.position),e=t.direction.dot(i),o=i.dot(i),a=n*n;var s=0;if(e<0&&o>a)return!1;const u=o-e*e;if(u>a)return!1;const h=Math.sqrt(a-u);return s=a-u?e-h:e+h,t.position.add(t.direction.mul(s))}}}},Math.random.unit_vector=function(t){if(t=t||Math.floor(1e3*Math.random()),!this._uv_lut){this._uv_lut=[];for(var r=1e3;r--;)this._uv_lut.push([].random_unit())}return this._uv_lut[t]},Math.model_matrix=function(t){var r=[].I(4);return"scale"in t&&(r=r.mat_mul([].scale(t.scale))),"q"in t&&(r=r.mat_mul(t.q.quat_inverse().quat_to_matrix())),"position"in t&&(r=r.mat_mul([].translate(t.position))),r};try{module.exports.g=g,module.exports.for_each=for_each}catch(t){g.for_each=for_each,console.log("Not a node.js module")}
</script>
<script type="text/javascript">g.web={_draw:function(){},_on_message:null,_canvas:null,gfx:{_initalize:function(){with(g.web){if(null==_canvas)return console.error("Canvas element has not been set, WebGL cannot initialize"),!1;const gl=_canvas.getContext("webgl");return null==gl?(alert("Unable to initialize WebGL. Your browser or machine may not support it."),!1):(gl.clearColor(.1,.1,.1,1),gl.clearDepth(1),gl.depthFunc(gl.LEQUAL),gl.enable(gl.DEPTH_TEST),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),window.gl=gl,document.body.onresize&&document.body.onresize(),!0)}},camera:function(){this._q=[0,0,0,1],this._view=[].I(4),this._proj=[].I(4),this._pos=[0,0,0],this._forward=[0,0,1],this._up=[0,1,0],this.look_at=function(e,t,n){return e&&t&&n&&(this._pos=e,this._forward=t.sub(e).norm(),this._up=n.norm(),this._view=[].view(this._pos,this._forward,this._up)),this._view},this.view=function(e,t,n){return e&&t&&n&&(this._pos=e,this._forward=t.norm(),this._up=n.norm(),this._view=[].view(this._pos,this._forward,this._up)),this._view},this.tilt=function(e,t,n){const i=[].quat_rotation([1,0,0],t),r=[].quat_rotation([0,1,0],e),o=[].quat_rotation([0,0,1],n),s=i.quat_mul(r).quat_mul(o);this.q=this.q.quat_mul(s),this._up=q.quat_rotate_vector([0,1,0]),this._forward=q.quat_rotate_vector([0,0,1])},this.position=function(e){return this._pos=e,this.view(this._pos,this._sub,this._up),this},this.up=function(e){return this._up=e,this.view(this._up,this._sub,this._up),this},this.projection=function(){return this._proj},this.perspective=function(e,t,n){return e=e||Math.PI/2,t=t||.1,n=n||1e3,this._proj=[].perspective(e,g.web.gfx.aspect(),t,n),this},this.orthographic=function(e,t){const n=g.web.gfx.aspect();return e=e||.1,t=t||100,this._proj=[].orthographic(-n,n,-1,1,e,t),this}},width:function(){return g.web._canvas.width},height:function(){return g.web._canvas.height},aspect:function(){return g.web._canvas.width/g.web._canvas.height},texture:{_filtering:null,_wraping:null,repeating:function(){return this._wraping=gl.REPEAT,this},clamped:function(){return this._wraping=gl.CLAMP_TO_EDGE,this},pixelated:function(){return this._filtering=gl.NEAREST,this},smooth:function(){return this._filtering=gl.LINEAR,this},create:function(e){const t=gl.createTexture(),n=g.web.gfx.texture._wraping||gl.REPEAT,i=g.web.gfx.texture._filtering||gl.LINEAR;return gl.bindTexture(gl.TEXTURE_2D,t),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e),null==n&&console.error("Texture wrap not specified. Please call repeating() or clamped()"),null==i&&console.error("Texture filter not specified. Please call pixelated() or smooth()"),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,i),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,i),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,n),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,n),t}},shader:{create:function(e,t,n){function i(e,t){const n=gl.createShader(e);return gl.shaderSource(n,t),gl.compileShader(n),gl.getShaderParameter(n,gl.COMPILE_STATUS)?n:(console.error("Error building "+e),console.error(t),console.error("An error occurred compiling the shader: "+gl.getShaderInfoLog(n)),console.error("-------------------------"),gl.deleteShader(n),null)}const r=i(gl.VERTEX_SHADER,t),o=i(gl.FRAGMENT_SHADER,n),s=gl.createProgram();return gl.attachShader(s,r),gl.attachShader(s,o),gl.linkProgram(s),gl.getProgramParameter(s,gl.LINK_STATUS)?g.web.gfx.shader[e]=s:(console.error("Failed to link shader program: "+gl.getProgramInfoLog(s)),null)}},mesh:{create:function(e){var t={indices:null,vertices:{},shader_configs:{},buffer:function(e){const t=this;return{set_data:function(n){gl.bindBuffer(gl.ARRAY_BUFFER,t.vertices[e]),gl.bufferData(gl.ARRAY_BUFFER,n.as_Float32Array(),gl.DYNAMIC_DRAW)}}},using_shader:function(e){const t=this,n=g.web.gfx.shader[e];var i=0;return gl.useProgram(n),{with_attribute:function(i){const r=t.vertices[i.buffer];if(void 0===r)return void console.error("Cannot use undefined buffer");gl.bindBuffer(gl.ARRAY_BUFFER,r);const o=gl.getAttribLocation(n,i.name);return o<0?(console.error('Cannot find location for attribute "'+name+'" in shader "'+e+'"'),null):(gl.vertexAttribPointer(o,i.components||1,i.type||gl.FLOAT,i.normalized||!1,i.stride||0,i.offset||0),gl.enableVertexAttribArray(o),this)},with_camera:function(e){return this.set_uniform("u_proj").mat4(e.projection()).set_uniform("u_view").mat4(e.view())},set_uniform:function(e){const t=this,r=gl.getUniformLocation(n,e);return r<0&&console.error('Could not find uniform "'+e+'"'),{mat4:function(e){const n=e.as_Float32Array();return gl.uniformMatrix4fv(r,!1,n),t},vec3:function(e){return gl.uniform3fv(r,e.as_Float32Array(),1),t},vec4:function(e){return gl.uniform4fv(r,e.as_Float32Array(),1),t},float:function(e){return gl.uniform1f(r,e),t},texture:function(e){return gl.activeTexture(gl.TEXTURE0+i),gl.bindTexture(gl.TEXTURE_2D,e),gl.uniform1i(r,i),++i,t}}},draw_tris:function(){t.indices?(gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.drawElements(gl.TRIANGLES,t.element_count,gl.UNSIGNED_SHORT,0)):gl.drawArrays(gl.TRIANGLES,0,t.positions.length/9)},draw_tri_strip:function(){t.indices?(gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.drawElements(gl.TRIANGLE_STRIP,t.element_count,gl.UNSIGNED_SHORT,0)):gl.drawArrays(gl.TRIANGLE_STRIP,0,t.element_count/3)},draw_lines:function(){t.indices?(gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.drawElements(gl.LINES,t.element_count,gl.UNSIGNED_SHORT,0)):gl.drawArrays(gl.LINES,0,t.element_count/3)},draw_points:function(){t.indices?(gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.drawElements(gl.POINTS,t.element_count,gl.UNSIGNED_SHORT,0)):gl.drawArrays(gl.POINTS,0,t.element_count/3)}}}};return e?(e.positions&&(t.vertices.positions=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.vertices.positions),gl.bufferData(gl.ARRAY_BUFFER,e.positions.as_Float32Array(),gl.STATIC_DRAW)),e.texture_coords&&(t.vertices.texture_coords=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.vertices.texture_coords),gl.bufferData(gl.ARRAY_BUFFER,e.texture_coords.as_Float32Array(),gl.STATIC_DRAW)),e.colors&&(t.vertices.colors=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.vertices.colors),gl.bufferData(gl.ARRAY_BUFFER,e.colors.as_Float32Array(),gl.STATIC_DRAW)),e.normals&&(t.vertices.normals=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t.vertices.normals),gl.bufferData(gl.ARRAY_BUFFER,e.normals.as_Float32Array(),gl.STATIC_DRAW)),e.indices?(t.indices=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,e.indices.as_Int16Array(),gl.STATIC_DRAW),t.element_count=e.indices.length):t.element_count=e.positions.length,t):t}},sprite:{create:function(e){const t=e.meta.size.w,n=e.meta.size.h;var i=[],r={};return for_each(e.meta.frameTags,e=>{switch(r[e.name]=[],e.direction){case"forward":for(var t=e.from;t<=e.to;++t)r[e.name].push(t);break;case"pingpong":for(t=e.from;t<=e.to;++t)r[e.name].push(t);for(t=e.to;t>=e.from;--t)r[e.name].push(t)}tag=r[e.name]}),for_each(e.frames,e=>{const r=e.frame;i.push({x:r.x/t,y:r.y/n,w:r.w/t,h:r.h/n,sec:e.duration/1e3})}),function(){this.frame_idx=0,this.frame_duration=i[0].sec,this.tag=tag,this.tags=r,this.queue=[],this.current_frame=function(){return i[this.tag[this.frame_idx]]},this.tick=function(e){for(;e>0;){const t=this.frame_duration;this.frame_duration-=e,this.frame_duration<=0&&(this.frame_idx++,this.frame_idx>=this.tag.length&&(this.queue.length>0&&(this.tag=this.queue.pop()),this.frame_idx=0),this.frame_duration=this.current_frame().sec),e-=t}},this.set=function(e){this.frame_idx=0,this.tag=this.tags[e]},this.origin=function(){return[this.current_frame().x,this.current_frame().y]},this.size=function(){return[this.current_frame().w,this.current_frame().h]}}}}},assets:{load:function(e,t){e.length;(function t(n){return n>=e.length?this:(i=e[n],"string"==typeof i?fetch(i).then(function(e){console.log("Loading: "+i);const t=e.headers.get("content-type"),n=t.split("/")[0];var r=parseInt(e.headers.get("content-length"));switch(n){case"image":var o=new Image;o.src=e.url,g.web.assets[i]=o,console.log("Finished: "+i),o.onload=function(){const e=i.split("."),t=e[0].replace("imgs","tex");var n=g.web.gfx.texture.smooth().repeating();e.indexOf("pixelated")>0&&(n=n.pixelated()),e.indexOf("smooth")>0&&(n=n.smooth()),e.indexOf("repeating")>0&&(n=n.repeating()),e.indexOf("clamped")>0&&(n=n.clamped()),g.web.assets[t]=n.create(o)};break;case"audio":g.web.assets[i]=new Audio(e.url),console.log("Finished: "+i)}switch(t){case"application/json":case"application/json; charset=UTF-8":return g.web.assets[i]="",e.json().then(function(e){if(g.web.assets[i]=e,i.indexOf("meshes")>-1){const e=i.replace("meshes","mesh").replace(".json","");g.web.assets[e]=g.web.gfx.mesh.create(g.web.assets[i])}console.log("Finished OK: "+i)});case"text/plain":case"application/octet-stream":return g.web.assets[i]="",e.body.getReader().read().then(function(e){console.log("Loading: "+i+" bytes remaining: "+r),g.web.assets[i]+=(new TextDecoder).decode(e.value)})}}):i instanceof HTMLImageElement?new Promise(e=>{const t=i,n=(t.getAttribute("texture-params")||"").split("."),r=t.getAttribute("id").replace("imgs","tex");var o=g.web.gfx.texture.smooth().repeating();return n.indexOf("pixelated")>0&&(o=o.pixelated()),n.indexOf("smooth")>0&&(o=o.smooth()),n.indexOf("repeating")>0&&(o=o.repeating()),n.indexOf("clamped")>0&&(o=o.clamped()),g.web.assets[r]=o.create(t),e({path:i,status:"ok"})}):void 0).then(function(){return t(n+1)});var i})(0).then(function(){t()})}},pointer:{_last:[0,0],on_move:function(e){return g.web._canvas.addEventListener("touchmove",function(t){const n=t.touches[0];t.preventDefault(),g.web.pointer._last&&(n.movementX=n.clientX-g.web.pointer._last[0],n.movementY=n.clientY-g.web.pointer._last[1]),e(n),g.web.pointer._last=[n.clientX,n.clientY]},!1),g.web._canvas.addEventListener("mousemove",function(t){t.preventDefault(),g.web.pointer._last=[t.clientX,t.clientY],e(t)},!1),this},on_scroll:function(e){g.web._canvas.addEventListener("scroll",function(t){e(t)})},on_pointer_lock_change:function(e){"onpointerlockchange"in document?document.addEventListener("pointerlockchange",function(t){e(t)},!1):"onmozpointerlockchange"in document&&document.addEventListener("mozpointerlockchange",function(t){e(t)},!1)},cast_ray:function(e){const t=[g.web.gfx.width(),g.web.gfx.height()].mul(.5),n=g.web.pointer._last.sub(t).div(t),i=[n[0],n[1],1,1];e.mat_mul(i)},on_press:function(e){g.web._canvas.ontouchstart=function(t){const n=t.touches[0];g.web.pointer._last=[n.clientX,n.clientY],e(t)},g.web._canvas.onmousedown=function(t){const n=t;g.web.pointer._last=[n.clientX,n.clientY],e(t)}},on_release:function(e){g.web._canvas.ontouchend=g.web._canvas.ontouchcancel=g.web._canvas.onmouseup=function(){e()}}},key:{_initalized:!1,_map:{},is_pressed:function(e){return g.web.key._initalized||(document.onkeydown=function(e){g.web.key._map[e.key.toLowerCase()]=!0},document.onkeyup=function(e){g.web.key._map[e.key.toLowerCase()]=!1},g.web.key._initalized=!0),g.web.key._map[e]||!1}},on_message:function(e){return g.web._on_message=e,this},canvas:function(e,t){return t=t||{},g.web._canvas=e,t.fill?document.body.onresize=function(e){g.web._canvas.width=document.body.clientWidth,g.web._canvas.height=document.body.clientHeight,gl.viewport(0,0,document.body.clientWidth,document.body.clientHeight)}:t.fixed_size||(document.body.onresize=function(e){g.web._canvas.width=g.web._canvas.clientWidth,g.web._canvas.height=g.web._canvas.clientHeight,gl.viewport(0,0,g.web._canvas.clientWidth,g.web._canvas.clientHeight)}),g.web._canvas.requestPointerLock=g.web._canvas.requestPointerLock||g.web._canvas.mozRequestPointerLock||function(){},document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||function(){},g.web._canvas.requestPointerLock(),this},draw:function(e){return g.web._draw=e,this}};</script>
<script type="text/javascript">
const SRC_SPRITE_VS = `
attribute vec3 a_position;
attribute vec2 a_tex_coord;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_proj;

varying lowp vec2 v_tex_coord;

void main (void)
{
  gl_Position = u_proj * u_view * u_model * vec4(a_position, 1.0);
  v_tex_coord = a_tex_coord;
}
`;

const SRC_SPRITE_FS = `
uniform sampler2D u_sprite_sheet;
uniform lowp vec4 u_origin_size;

varying lowp vec2 v_tex_coord;

void main (void)
{
    lowp vec2 origin = u_origin_size.xy;
    lowp vec2 size = u_origin_size.zw;
    gl_FragColor = texture2D(u_sprite_sheet, v_tex_coord * size + origin);
}
`;
const AG_SPRITE={ "frames": {
   "ag 0.aseprite": {
    "frame": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 666
   },
   "ag 1.aseprite": {
    "frame": { "x": 64, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 666
   },
   "ag 2.aseprite": {
    "frame": { "x": 128, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 666
   },
   "ag 3.aseprite": {
    "frame": { "x": 192, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 4.aseprite": {
    "frame": { "x": 256, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 5.aseprite": {
    "frame": { "x": 320, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 6.aseprite": {
    "frame": { "x": 384, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 7.aseprite": {
    "frame": { "x": 448, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 8.aseprite": {
    "frame": { "x": 512, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 9.aseprite": {
    "frame": { "x": 576, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 10.aseprite": {
    "frame": { "x": 640, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 11.aseprite": {
    "frame": { "x": 704, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   },
   "ag 12.aseprite": {
    "frame": { "x": 768, "y": 0, "w": 64, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 64, "h": 64 },
    "sourceSize": { "w": 64, "h": 64 },
    "duration": 100
   }
 },
 "meta": {
  "app": "http://www.aseprite.org/",
  "version": "1.2.16.3",
  "image": "ag.png",
  "format": "RGBA8888",
  "size": { "w": 832, "h": 64 },
  "scale": "1",
  "frameTags": [
   { "name": "snooze", "from": 0, "to": 2, "direction": "pingpong" },
   { "name": "Soar", "from": 3, "to": 10, "direction": "forward" },
   { "name": "sit", "from": 11, "to": 11, "direction": "forward" },
   { "name": "Jump", "from": 12, "to": 12, "direction": "forward" }
  ]
 }
};
const BEDDY_SPRITE = { "frames": {
   "beddy 0.aseprite": {
    "frame": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   },
   "beddy 1.aseprite": {
    "frame": { "x": 128, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   },
   "beddy 2.aseprite": {
    "frame": { "x": 256, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   },
   "beddy 3.aseprite": {
    "frame": { "x": 384, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   },
   "beddy 4.aseprite": {
    "frame": { "x": 512, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   },
   "beddy 5.aseprite": {
    "frame": { "x": 640, "y": 0, "w": 128, "h": 64 },
    "rotated": false,
    "trimmed": false,
    "spriteSourceSize": { "x": 0, "y": 0, "w": 128, "h": 64 },
    "sourceSize": { "w": 128, "h": 64 },
    "duration": 100
   }
 },
 "meta": {
  "app": "http://www.aseprite.org/",
  "version": "1.2.16.3",
  "image": "beddy.png",
  "format": "RGBA8888",
  "size": { "w": 768, "h": 64 },
  "scale": "1",
  "frameTags": [
   { "name": "snooze", "from": 0, "to": 0, "direction": "forward" },
   { "name": "kick", "from": 1, "to": 5, "direction": "forward" }
  ]
 }
};
</script>
<img
id="ag"
style="display: none;"
src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAA0AAAABACAYAAAAzixffAAAAAXNSR0IArs4c6QAAGttJREFUeJztnc1u20i2x/+8aOQBLAdZGN7NIs5CfIE04MxF8giRgQDZOpa6d3fRbTfGcGPi24u7S0vubBtowM4jOJhJgM4LUIsoF+hdkEXgyA+QTc1CPOViqUgWv4vk+QGGbYmUWN91PuocgGEYhmGYuhHhD8MwDFMzXtMPwDAMwzA9QwRBAADwfR/gtZhhGKZW/qvpB2AYhmEYhmEYhqkLFoAYhmEYhmEYhukN3zT9AAzDMAzTN357+bLpR2AYhuktbAFiGIZhGIZhGKY3sADEMPWSFPWJI0IxDMMwDMNUDAtADFM/JkGHhR+GYRiGYZgaYAGIYepDHIzHOBiPgajAE/d6HxFBEFB+FM6T0m64DZm8cN9pP7INlTmdYZyBBSCGKZcsE31V17YVmRslCAKEf3N+FDfI2v8EAGrDPlHFxr2XwoDSd7L2u97VlaN4yjxOv7ldGGdgAYhhykMsji5TJ/qtzW2QxUcIgYPxGFub24mfGwQBFkeXiZ/bBW69+oxbrz4DkAkiO13eliCUjYxte3h9FH6onkrc7FXxma0hoxJE7adM84hwDo/M60yv0L05nJq/WABimHIQQRDg6+M7se+HLm744/vfsbW5jdl0CmAlEP3x/e8AkOgG9/Xxnc5vgnaeP8LXx3dI+AGSNz+drQdXydr/fnv5sk+unZ7Sb8sYq0LdzIef3QeLqDgYj7OGCRcs+DRCUv/2gFW//fr4DnaeP6rpkZzFaWGgZAQAIYSQSl7Nzd+JemABiGFKJEnLdb1c4u3JGyxuL6TAA6wEosXtBd6evMH1cpnrszuCp7lLmDZ7jU+aPURu7DMINEIVBnqE5/s+fnv5spQ8P/Q5PRJ+IlhagSMCU1/rqkGS5mSbOb3rtEIYKBHx8O59CCEwnkzgeR7enryJXKDVQWOwAMQwJXHr1WdpAdK0v2I0GmFjMMDu8QPsXO1g9/gBxpMJAERe2xgMMBqNIvfSAvL18Z3OC0G0iTFsHuXi4MLE2UMi1g0LIaiPG501Cli/BPdxSaIVWK0nFn7qR5uP1zbxCXN6H2iNMFA2tL/ZudqJvK6W82w2AxocrzxRMEx5RA5+//bypTrA5UJNVp7z83OMJxP5/8ZgAABr9zzb3wcAW7ewNiMAQAgBz4sWkQRIlaYnz54iMixg8lq1Tydc3yXS6slUN7b3dhXqG0l1E7m+p/XkEmuC+vVyiYuLi8hrB+MxtQ/QrzYSD+/ex9/+PgQAKfzsHj9Yu7BD/VcIITCfzwEkC75Nl5ktQAxTHh4UF5jZdIrQ7C2EEJhNp7heLnF4eIjDw0M82vkWf/17Lv+/Xi7X7gGgu8B0YYKM5WA8xngyQVh2j14DVovH25M32NrcVhdTpl48te5tLRyhhlNaNW3uaTm56gn93NSr1l1by1cf68lJzmYzbG1uy/kZiGj5PVrHumbhsOVy8See7e/j2f4+do8fGIWfLqEKP0m4MGa/afLLGaajeGezWWSzQ5sh9aDu6w/vIjcdHh5Ky0ffF/dQCBJkRt8YDLC4vVi9+Y+IRtHod17Xc/YU72w2kxvQsC1Mlh2y+Ei0ft0XaxCASD0hCAKpGQ2CAL7vS/fOnpEm8BjPAfZ9fmwIowAvhMDz41/k/Lw7Xm3wD8ZjzKZTOYf3kTYJA2UghBDeahMjrUDkwQLcWINcUWC2vsIZxlEiizRFfFNdu0gYUs9WkK+wSlcmRwsElX82ncLzPFkf18sl5r+uFpL3m+/lDZ7nwdJdhikfKzevZ/v7sW4QHW6zSN2omwAb1PrqSx2pUJ9h90DniLgnhkIOAODel3sAgOF3Q2wMBnIO72t7mYQBFU0Y6FSdhGWPvKYqfVwpc+MPwDAdRrqxGYQaVTvuKe5BckEZTybOTBQ1ENGAUx3QonF6egoAcmEFgOfHvwAAPn35CMCdSbUhVO1snXWQtCFdC01sEoTCsdA1ZL1kFX4I1zYLZaPOeYReV1pQg6aFn6bGmEvINqDcdUcnP8g39/b2AKy8GQBgOBzK95T1DOhR/bVFGCgLRfADlDXAoNQhOAgCw3QUo5ZTX+hjNoZAj8aoviHS3QbVxfTel3tY3F7I6Hk1LKwuu2uJxdGljEDYQCQs08bUmJBS7+cd7eOFrD9ED6xAa3Ojqa7IQt608EP9+darz5TTxtX2qHKukooqSulAc/BsOsV4MlkL2qO3cUcVHkYyCANtrRMbpYBQBT6dJsvPQRAYpmZMi3zeTVKHWNMG08Lp+z5838ejnW8xnkykltFAZYu+6wlo1RDpi6NLoN5nXTvwH5eUso/9PE/43z6GDI7rG0EQNC78hGMqkurAUaqeq4z1TpFM//r3XM7XQOyZNmfn0bLxdNNPtxBBEIB+kLNdm0yUzQIQw1SLd5bjwF/LtUJZSToI7dEE+/rDO7lJGn43xMF4jOF3w8TksWWiTPJxk3UTCe0ieaLU3zUj+7mtkOPKQVimOWz7APWppuZFfWzVrBCxmVcEDC6nVXG9XEbmYGDlrvz6wzt1Q2xspyY3vA0SaZsOKILW+pqW2DVynasKnb5ssBimSazPA3TVL9iAnCRVt4A4F5gwUhYaciFYc13Qz7oARlePKp9LfqchT1TZ36u61CS511hvwJR67GIft3J7jaNP7rDk9mpbNynunbb9NA/G+aoO19uYeUX9zrX1pQY3WKObp2muVlHn+ArnK9dIPAvZ0rEty+T7ftzaF+kDaUJQE/XQtkpnmDYSSWiaRkz0oy4RSRhrg+/7MmhEEAQYDodJh2plQkWUV4drmiz67qQwvpbtKINh2D6LGiyi4mAZkbbSNi30nZnaMyEUapf6u9X5FhM9OCdlDI2eUQgCDGHWDf20kjFRUNlhO94TQ4Sb5p9n+/tlCz9xc6lUwMymU8zn80idB0FgbeHpQ4LvJEGgxeNb7cfGMZElrD8LQCnaxYT3GDdJmwT70p6ZXRMaOMheB4Ly92QRCIHoplkIIUNkU5hRaNYY0kKi3DrMnKvFZCnS0cJ4q+jPLoBoqHQKNWu4tiyMB3d18oR5VsNjdzQ61Fp/sbUAA/2oE+oDRcKE69RkBRF6yoKE9jIKfAnuf8aod2lU1F+EMpeqny2wSnIqlLk4szAL3Cj8lNxunervaVaQDpU5U3/VaaIeXEyEahJ02ugvavvMJs113Oe1aZCkDoaeJELMNSkkJJdsLWrizLw+0OpnULLUcOEVpP2s0A/eA1b9Nk67ry9wavJLfSOsCwH6plBPppt0TgoVzg8pB5pztSXdo96rJLbtSp+X/QWwF5w7KvgABrdNIH//iROCDFbKslGtIgBuwvYDMI5b0/OSRVl/L6m/xM0zVW8eFbc2QQILJaqmVA95N79q+ytCUBdIFX6A6BoR0rVxb0UTe55K/dOzEpPQUMS87jLWm96YwR4nALah7ECx8ndFACRyH0ztmBXIuPmxRV08yO1LRf1MNVJT6DpXBYnnunRNft6cMHGLppoo1vM8jEYjXFxc0Nu1zOtlhHrW6ag7DLvA5nB7TSIhpwhQcf+nsaZaPUxzEpB/vOvuQ0lzTJV9hVzZ9Oh35IIcR945vkPCv3HdtwkG0PKxn+q2mRYUoc4+ULYFKLOLCGGYxFpr9clSfj2rcvh3nMncdSEgd/mBiAa4U5Tt4tFCCgk/OoaksgBu/N8pZG3FmmDPZAkiVE1tkXInaboJeobRaISNwaBKbWLllnnFRVK0fCNA9N0CLN1eq7bMVoTs4wfjMa6XS2wMBpF1qyzhx3RP2mdUPUZUizr9rbqsAfHlz8qz/X31DFMX+n4E2zW95WPfs7F4q/3a5DUB1LPfLdVX1ObAHmCuGBpQW5vbMrM7DSx6zfEFsZTy69eq1/ep/HF/w93yx5FJ+0t0SAtcWPMb4+6hYzpnU0fd1RJ61lQHQRDg9PQUG4MBAODtyRvsHj9Yuy6k7LowLnJlCLiadr/1/b/P419Nblx23wDq79/qGLteLnF4eGiMglVHmOMaPQRMc2ps3jaiSB10wBJs5f6WRMvHvzEoQtxa2VSS1LLyAOluamscjMfyR79G3eR++vIRW5vb0qdWFYgcjh9fqPwqW5vb8johhBQKHae08hNns1kXfIELHQp0uL/bktsirKLmAFE2xJ72A8PrnYG0ozqHh4e4Xi5lVva3J29M80UVdWH8zN9evpSLWV4rppbzpc39v++QFS/3ZljtSwn9qfL+vbW5HRljJPzoxI3TlpM2z9JZt8y5wOJQ1oy2jn+PhLi8nggtX/8z5T+M6y9V10EjiVBNm+Dr5VJuen/6+Uf5+k8//yhfryvhYdXo5e+AAJiJJCHIQgBsffn7RFlub5omqAptb66fuhIPEs/2941Wkd3jB9i52sGTF0+ltbxJDWIZQlAHNkEAynGFaiGF3V6L9qES8GgcffryEU9ePMXO1c6alRVYbf7rbjMtMXOenzKRc3MZiktt/LcVzyT8UP10RMmbhBw/RcpZ5b63jDNAhUPfke+6+jnjyQSz6XRtEIQHEF3yjyxUfuJ6uVQPMePo5AcAiAiDo9FIfic6VH6TAEjl1wXAlkWK8s5ms1yb5AryOVSJMAi1pT131eFsi7gq5DnfVQIyNO3Du/dxufgT48kE7zffAyeRM1JV9x3jOSg1pG0RAVE7E9Ba+noGsKhygNpeORcWeb8mAd8DIEgheYQfgOlqjP3PaILXH95RhLTahXQ6X5gFtR+Gz1yJ9cz3/bKVQ5GzWC13D8ucI6fFRNqogn5RiFItQHka9WA8jmz8r5dLXC+X8vwP/U+o17pGnvLrAiD90CZGfW1jMFCFIOcoMqi7bAHMs5lp0QZIboCpn4Z/C6ATmmznIWURof5dA55Jo0lWqhb148roqQWoMEqUM3KximjPUeMGWD3kr483phpoDNBaoq0vQDssw5E+Sv23J8KPiTWrmO/7toF+Sm/vxvIAUex44GbB3tvbk361j3a+BQD838XqvdPTU5yfn6sTjwiTILYaXbtFm/zz83MpAAKQB51dFgDzkNMCWPdjFiLvBqgF5nGj9U9dpIpYSLSwqFXhFdHeNqTNimhYT09PMZ5M8PbkjXSBC6nLUlqK20scioa9bfO9yDsGSLvf0mhQVWh5ZR3UPC/KueH58S/44/vfsYsH2Nvbk3sTxUJd64Y8j3W0Kiu9CbLeFZn/NYEnQkvGRykeQh1Drl+mACJ1UrsAFDd56e4Srz+8i7x/eHgIRd5xucMnQuXvqwCoa0ByCoCtKncfXWDyZngnas4Jkfvz6zbph5sCoc+jdED7j6vf8eTFU2dC55d5KFopi+ubnj4i26aMDU1Nyo80ZFm2Nrfxx/e/Y3F7AVwBw++GkQsPxmNRtzus4y7SHgoGwTAli2Y6g+f7fuPCYRkCUGw+DNMEZtosDIdDmdhPv07VcFDiMcfIVf75fC5fozK2VADMVf7h8GYBySEACgBoowDYIYzazqIZ3oEb4S/c9HIbI14gpjDYu8cPgKtVMIRP+Khf1pTAIDdBRTaGan/AzaZK739NhUFPIjFXVBoOnXOwDYMsXysqDNSo/IgjUr5PXz5GxhgGq7GnR4KjvsoujAAAj/pE3v5A96h51Qy0QiGiKvkzWj5aUb6qIAV5FRa/Us8AqQehn+3vIwiCtR9VoBkOhxgOh5jP55jP57Jz0HVqEq4gCDCfzyGEgFDNJw6RtfzAaiCEZZJlpnKr9UDXKZFfnCNL+anNPc+Tv9XF5PWHdxEhkARAurZtwk8WDVZLtF2eOoGXFf5V1fw6oAFOI3VzmxK+1wrT/TRfnJ+fy9dIK61F3mk6JLgH2Pl5x6H3KzVCpHrmjLLWL44unZ4nW4YIgkAmFw6CQOhnMtR2IDqQA8aDIYqVavk5Pz+X67JOGWO+qXMRZVL2XK6vM2EdtGovkAVlbBWJ9ud0H8lC2X2+rI4T2QjonV21bJh8VvX3dSuR/pqDpt9c5aeJU7cGqYIC/a1bThwTAAq1P9WDjQVwPp+72P5pZEqG6HASxMjEowtAZeDI5scG2edNZdeSeSLp2iRMmyAKEHM2m0mruHY2zsW6KxQWOWkzOJtOI3PorVef8fXxHQCA7/tN10VuF0kX5jkSKtU6Bdbbg/okkbeNHbD8JCGAm3OoNPaEEJGyq+Qd73pAoaQ5xtG1QqdwQmwVfX7VcKUuImXW93QmynQJ0yL+Ae7UC2FlHa8yAmQlApBOjPSvfrduYje5N7jk2qDD5c9RfrLkabJcYvkVYcm1OkjCevPn4CYgEn7URNmWH7hR7iTW+nuSi4Yp8k+Sfzu9po8bul/dbIauw604F6O6SBURBMlllgKleJ4nx5aqLHJk0c+k/CAcUoIItT6DIJDPpm78iwpA2oa26TKnIRCuX6bym8Zt0jjX30uKFBY3zzjSV9IonBtKJU4pUmeghwRMwo90H7VJvaCWI49g1CUBiEhQtOcqW5kVkrpRUnFYas8Llz+kp+U3ISd8wkYAIhwRCORknaSFz7PhURd+R8qaxlp7pqFtTIymeyVggf6WXhdr36+cnXS53giZLyrrJkjtJ6rm3SD8yY2HQ4t+ZiuQa89usMxKIUBpi1yWThKoWpbfRegCYMIZXaPlPMEtTNZxjrnG9P0uEZnD8gbLsVmLGh5DIsFrKVUAMoyDom5frvaJ1D6ur6GW582tyltZckH1H9MD//X/7yP/v/7X2yqfp264/Ao9LD+QYCVIwzHtntGMr+Dp16RhEHrUz3IVQdpvwiang2Xb0XixLb8x+WiG+5smsztM6Mom7xsOh9INMETfLLhkFWuzC2xcXcqNLLkgqkISuc7Z0CK3V0JQuTWrj/X4DX+nzgs2nhW6gs0h4TkO4/7Adnxo/SXyWYZ1qlHlofJ3olBswOX2K5tUxaKNEGS4XmetTuuq5NjGfvjfuwA6uQFW4fLH0NHyGwdoXgEIaHyDq2vY457DWtOtJzl0nDUrmMmyU7NQsuZOogmnrternBPUujWNEfVcpMka6ZCwEEfieTGVFp3rECbLtqmtVNQ27kJ/rcHqEqfsUL9zrX+1QAgCkD1hdkq5bNcpxk0SBSGbNVdF71OmvuNCB8mq/ewaXP4VXSp/busP4ZgVyBYrTXfL3N4A7RxEiOmZ40IzV4lR6GzLBigkVqN3NptJawJtqk9PTwGscoNRnjDH84MZhQWdFgl1YjQaAYi2weHhoX4GS4ZB1nG8fDpNjzGbeSXpzImrrLnDJeGYZZSpjiwKRevATKYxUWoY7Jx46HeH5vL3u/xdQW7ybEPANp0ELSvKBBrXXz3tpw48Espuvfoc+d0ivITzEILSADy8e19GwZz/OsfZbIb5r3OZJNlRcuUBcj3E8cZgEGkDYDXuH969L9M2IOb527iJ1cdWzQKGzbziQZkL2oLt2NBzgVX3RIwDeMBNCHqba/V7zmazSAqZuPHqggDEMJ2mSAK4lrAWBj1uIW5JjiMdz3WNqhqmeOf5I8DhZ41h7Xlp8aMcYn/7++rcT4LA04qNkWkMtGhcGOuY8lFdLv6U7QXY++I7jheOKXx9fMd1BYPzc1UccWPA931TJLBWjHWmEHn6sK4sSFQctG6QMExLsPb7j6Ml5wFMOaCM0W6A2PNNrpatTbgcJt+GyKF6gvL7kNubmvj1+fEvAIBPXz4CcHKcCLU8apjosM9L91/dVYzucTDCnxzvW5vbAICjkx8ArMqnusMBN3nrDCGiXSqTLW0fY05hco9McVtKWmuYbiLbvIr25s7DMNVg5fcfR0vOA6QtSPJMUEquAxfLxtTPWn+iUMPXy6V0tXq/uYogSVHgqlwgC7Dm+qaFSo5N9gysCUuAg+Wi9iHufbkHABh+N8TGYCDLS23YspDtTPXEuodqudDW1hTCsbHBlA8LQAzTUmIj+KghlZXQpXVHEiuC1UIUdwg66R6mt0T6lJ5ck8bOP//xvzg6+UFPoKziQp8yjQ8YcoMYX3N0kxebx2prcxs//fyj/J+IaUMXysK4QVqob2PAB0fHB1M+egCiUtuZzwAxTE0oE3XksKp6uN7i0J8L2C5Aaxsm9ZBizD0MQ9YCOR6ul0vsXO1g52oHAPSkk00En0hCjo/ZdIrZdAohBIQQ0pUPAB7evY+Hd+/L/09PT+V1dN9sOnXpzIOxrqmNqH3IDe5sNoPneZ7q0sgwGp62JuiY+n1knXRofDDlkjmBdFZcWCwYpotYuYelvRfzfpNkeTZTGTk/AxOHPAekb4ZGo9Fa8APHxgWghSLWXHjkWCABgdzE9vb25P8A1u4x5M1xqsy6Bv96uaSw5DcXCaELrQyjI5PuWro9ubxOMsURBus4W4AYxnGKTsyuarjKWHB4gWLi8GjDH/YzaWm4uLhI0hK7gFgcXUbc2VRBhvLmAJChu8k9jEJKE+G1Ato8EAQBFkeX9J5zUPsoOZk8hG06n8/VNmUYE5nXEkfXSaYlsADEMBVSQCvlmjuciNncxV5f9QMx3YOsHYagIRGXK8fGBoBoiGRNW+ldXFzgernE25M3WNxe4O3JGwArFzn1NcV6Iu9V8zxRqHOX0NpjzQ0xoU0ZxoaktWRNSZByPdMevLQ8PkVhAYhhykUEQYBn+/ulLPj0OQ1P7FL4eba/byvUeVX77zKdQ9BmPyGRpktnfdZIElA2BgPsHj/AztUOnrx4Kl9/8uIpdq52sHv8IDGpq4vCT0hSm9i0KcMYCdeQ1LXmbDaT6y0LQZ2i0vmeBSCGKY+yfVYjwRJcmNizlimDwMQwWBxd4tarz6orWaL2t4ZHssXzfT8pSabUVD958VTmLhpPJvj05aMUiJLGyq1XnyvThBYg1QocBAFuvfpM7nsMk0ZEoLG9Jy75NsPE4dJEyjBdwDZZXpb49i4k4JNJG7NcHwSBi5s2xk3Wov74vt+2fpM0TvQxL7GYC7KOPycIgiAiwPJcwFgilLUDyLjuZLyH6SnfNP0ADNMxqph0XZjI8wQ7EKyVYzLg+b6vb3zaFjUwU7CT8LeNVbdNdUAINdcRCz9MFnJGPeT+xVjDnYVhmqHSDMcMwzhJnCWnlRYehmGYtsJngBiGYRimPkxCDgs+DMMwNcICEMMwDMPUQ5Kgw0IQwzBMTbAAxDAMwzAMwzBMb2CNE8M0g4x4xYeDGYZhGIZh6oMtQAzDMAzDMAzD9AYWgBiGYRiGYRiGYRiGqRwBuxwgDMMwDMMwTEn8B+OlOJ0yemB0AAAAAElFTkSuQmCC
"
texture-params="pixelated.clamped"
/>

<img
id="beddy"
style="display: none;"
src="data:image/png;base64,
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
"
texture-params="pixelated.clamped"
/>
</body>
</html>
